# テレビ番組知識グラフ 拡張スキーマ仕様書

## クラス定義一覧

### コアエンティティクラス

| クラス名 | 日本語名 | 説明 | 主な用途 |
|---------|---------|------|----------|
| **Program** | 番組 | 分析の中心となる番組エンティティ | 類似番組検索、特徴分析、新企画生成 |
| **ProgramFormat** | 番組フォーマット | 番組の構造的分類 | フォーマット別傾向分析、成功パターン抽出 |
| **ViewerEmotion** | 視聴感情 | 視聴者が求める感情体験 | 感情ベース推薦、満足度設計 |
| **ProductionElement** | 構成要素 | 番組を構成する部品 | 組み合わせパターン発見、共起分析 |
| **ShiftPattern** | ずらしパターン | 創造性を生む転換手法 | ずらし推奨、リスク評価、創造性定量化 |

### 文脈クラス

| クラス名 | 日本語名 | 説明 | 主な用途 |
|---------|---------|------|----------|
| **TimeSlot** | 放送時間帯 | 時間的文脈情報 | 時間帯別最適化、視聴状況把握 |
| **TargetAudience** | ターゲット視聴者層 | 視聴者属性と特性 | ターゲット別最適化、価値観分析 |
| **ViewingExpectation** | 視聴期待 | TimeSlot×TargetAudienceから生成される期待値 | 文脈依存の動的推論、適合性評価 |

---

## プロパティ定義一覧

✅️ 必須
○ 省略可

### Program（番組）のプロパティ

| プロパティ名 | データ型 | 必須 | 説明 | 例 |
|-------------|---------|------|------|-----|
| **title** | string | ✅ | 番組タイトル | "PS純金" |
| **startDate** | date | ✅ | 放送開始日 | "2015-04-03" |
| **endDate** | date | ○ | 放送終了日 | null（継続中） |
| **productionStation** | string | ○ | 制作局 | "中京テレビ" |
| **broadcastArea** | string | ○ | 放送エリア | "東海3県" |
| **genre** | string | ○ | 番組ジャンル | "グルメバラエティ" |

### ProgramFormat（番組フォーマット）のプロパティ

| プロパティ名 | データ型 | 必須 | 説明 | 例 |
|-------------|---------|------|------|-----|
| **formatName** | string | ✅ | フォーマット名 | "対決型" |
| **formatStructure** | string | ○ | 構造説明 | "2チーム対抗戦形式" |
| **typicalDuration** | integer | ○ | 標準的な長さ（分） | 60 |
| **segmentPattern** | string | ○ | セグメント構成 | "導入→対決→結果発表" |

### ViewerEmotion（視聴感情）のプロパティ

| プロパティ名 | データ型 | 必須 | 説明 | 例 |
|-------------|---------|------|------|-----|
| **emotionName** | string | ✅ | 感情名 | "達成感" |
| **emotionCategory** | string | ○ | 感情カテゴリ | "競争と達成" |
| **intensity** | float | ○ | 強度（0-1） | 0.8 |
| **description** | string | ○ | 感情の説明 | "努力が報われる感覚" |

### ProductionElement（構成要素）のプロパティ

| プロパティ名 | データ型 | 必須 | 説明 | 例 |
|-------------|---------|------|------|-----|
| **elementName** | string | ✅ | 要素名 | "料理" |
| **elementCategory** | string | ○ | 要素カテゴリ | "コンテンツ要素" |
| **complexity** | string | ○ | 複雑度 | "低"/"中"/"高" |
| **productionCost** | string | ○ | 制作コスト | "低"/"中"/"高" |

### ShiftPattern（ずらしパターン）のプロパティ

| プロパティ名 | データ型 | 必須 | 説明 | 例 |
|-------------|---------|------|------|-----|
| **patternName** | string | ✅ | パターン名 | "対象転換" |
| **shiftCategory** | string | ✅ | カテゴリ | "構造的ずらし" |
| **shiftDegree** | integer | ○ | ずらし度（0-200） | 80 |
| **riskLevel** | string | ○ | リスクレベル | "低"/"中"/"高" |
| **description** | string | ○ | 説明 | "想定外の対象に焦点を当てる" |
| **prerequisite** | string | ○ | 前提条件 | "明確なターゲット設定" |

### TimeSlot（放送時間帯）のプロパティ

| プロパティ名 | データ型 | 必須 | 説明 | 例 |
|-------------|---------|------|------|-----|
| **slotName** | string | ✅ | 時間帯名 | "土曜夜8時" |
| **dayType** | string | ○ | 曜日区分 | "週末" |
| **hour** | integer | ○ | 時刻 | 20 |
| **viewingMode** | string | ○ | 視聴形態 | "集中視聴" |
| **energyLevel** | string | ○ | エネルギーレベル | "高" |
| **competingActivities** | array | ○ | 競合活動 | ["外出", "家族団らん"] |

### TargetAudience（ターゲット視聴者層）のプロパティ

| プロパティ名 | データ型 | 必須 | 説明 | 例 |
|-------------|---------|------|------|-----|
| **audienceName** | string | ✅ | 視聴者層名 | "ファミリー層" |
| **ageRange** | string | ○ | 年齢層 | "30-50代" |
| **lifestyle** | string | ○ | ライフスタイル | "家族中心" |
| **mediaLiteracy** | string | ○ | メディアリテラシー | "中" |
| **preferredComplexity** | string | ○ | 好む複雑性 | "中" |
| **valueOrientation** | array | ○ | 価値観指向 | ["家族", "安定", "共感"] |

### ViewingExpectation（視聴期待）のプロパティ

| プロパティ名 | データ型 | 必須 | 説明 | 例 |
|-------------|---------|------|------|-----|
| **contextName** | string | ✅ | 文脈名 | "土曜夜8時×ファミリー層" |
| **expectedFormat** | array | ○ | 期待フォーマット | ["対決型", "クイズ型"] |
| **expectedElements** | array | ○ | 期待要素 | ["料理", "タレント"] |
| **avoidElements** | array | ○ | 回避要素 | ["暴力", "複雑な構成"] |
| **acceptableShiftDegree** | string | ○ | 許容ずらし範囲 | "40-120" |
| **contextPriority** | array | ○ | 優先順位 | ["娯楽", "共感", "情報"] |

---

## リレーション定義一覧（拡張版）

### 基本リレーション

| リレーション名 | 始点クラス | 終点クラス | 説明 | 関係の多重度 |
|---------------|-----------|-----------|------|-----------------|
| **hasFormat** | Program | ProgramFormat | フォーマットを持つ | 多:1 |
| **hasElement** | Program | ProductionElement | 構成要素を持つ | 多:多 |
| **targetEmotion** | Program | ViewerEmotion | 感情目標 | 多:多 |
| **appliesShift** | Program | ShiftPattern | ずらし適用 | 多:多 |
| **hasTimeSlot** | Program | TimeSlot | 時間帯設定 | 多:1 |
| **hasTargetAudience** | Program | TargetAudience | ターゲット設定 | 多:多 |

### 文脈生成リレーション

| リレーション名 | 始点クラス | 終点クラス | 説明 | 関係の多重度 |
|---------------|-----------|-----------|------|-----------------|
| **generatesExpectation** | TimeSlot+TargetAudience | ViewingExpectation | 期待値生成 | 多:1 |
| **recommendsShift** | ViewingExpectation | ShiftPattern | ずらし推奨 | 1:多 |
| **avoidsShift** | ViewingExpectation | ShiftPattern | ずらし回避 | 1:多 |

### 要素間リレーション

| リレーション名 | 始点クラス | 終点クラス | 説明 | 関係の多重度 |
|---------------|-----------|-----------|------|-----------------|
| **coOccursWith** | ProductionElement | ProductionElement | 共起関係 | 多:多 |
| **combinableWith** | ShiftPattern | ShiftPattern | 組み合わせ可能 | 多:多 |
| **prerequisiteFor** | ProductionElement | ShiftPattern | 前提条件 | 多:多 |

---

## RDF-Star対応メタプロパティ

### 関係性の定量化プロパティ

| メタプロパティ名 | データ型 | 対象リレーション | 説明 | 値の範囲 |
|-----------------|---------|---------------|------|----------|
| **frequency** | integer | coOccursWith | 共起頻度 | 0-∞ |
| **strength** | float | coOccursWith | 関連強度 | 0.0-1.0 |
| **shiftDegree** | integer | appliesShift | ずらし度 | 0-200 |
| **confidence** | float | generatesExpectation | 確信度 | 0.0-1.0 |
| **recommendationScore** | integer | recommendsShift | 推奨スコア | 0-100 |
| **avoidanceScore** | integer | avoidsShift | 回避スコア | 0-100 |
| **synergyMultiplier** | float | combinableWith | 相乗効果係数 | 0.5-2.0 |
| **riskReduction** | float | combinableWith | リスク軽減値 | 0.0-1.0 |

### メタデータプロパティ

| メタプロパティ名 | データ型 | 説明 | 例 |
|-----------------|---------|------|-----|
| **lastUpdated** | dateTime | 最終更新日時 | "2024-11-20T10:00:00Z" |
| **dataSource** | string | データソース | "Wikipedia", "専門家判断" |
| **validityPeriod** | string | 有効期間 | "2024Q1-2024Q4" |
| **reason** | string | 理由説明 | "家族全員が楽しめる構成のため" |

---

## スキーマの特徴と利点

### 1. **文脈依存の動的推論**
- TimeSlot × TargetAudience → ViewingExpectationの自動生成
- 文脈に応じた期待値の動的計算
- 状況に応じた最適なずらしパターンの推奨

### 2. **創造性の定量化**
- ずらし度を0-200スケールで数値化
- リスクレベルと組み合わせた評価
- 複数パターンの相乗効果を計算可能

### 3. **感情ベースの設計**
- ViewerEmotionによる感情体験の管理
- 視聴者の求める感情と番組のマッチング
- 感情の強度による優先順位付け

### 4. **共起パターンの発見**
- ProductionElementの組み合わせ分析
- 頻度と強度による定量評価
- 新しい組み合わせの提案基盤

### 5. **リスク管理の体系化**
- ShiftPatternのリスクレベル評価
- 前提条件の明確化
- 文脈別の許容範囲設定

---

